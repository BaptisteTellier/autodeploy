**********************
Windows PowerShell transcript start
Start time: 20251010152211
Username: 
RunAs User: 
Configuration Name: 
Machine: 
Host Application: C:\Windows\System32\WindowsPowerShell\v1.0\powershell_ise.exe K:\autodeploy vsa\test\autodeployppxity.ps1
Process ID: 38712
PSVersion: 5.1.22621.5909
PSEdition: Desktop
PSCompatibleVersions: 1.0, 2.0, 3.0, 4.0, 5.0, 5.1.22621.5909
BuildVersion: 10.0.22621.5909
CLRVersion: 4.0.30319.42000
WSManStackVersion: 3.0
PSRemotingProtocolVersion: 2.3
SerializationVersion: 1.1.0.1
**********************
Transcript started, output file is ISO_Customization_20251010_152211.log
[2025-10-10 15:22:11][INFO] ==================================================================================================
[2025-10-10 15:22:12][INFO] Veeam ISO Customization Script - Version 2.3
[2025-10-10 15:22:12][INFO] ==================================================================================================
[2025-10-10 15:22:12][INFO] Loading configuration from: production-config.json
[2025-10-10 15:22:12][INFO] JSON configuration loaded successfully
[2025-10-10 15:22:12][INFO] Applying JSON configuration...
[2025-10-10 15:22:12][INFO] Applied 35 parameters from JSON configuration
[2025-10-10 15:22:12][INFO] Configuration loaded from JSON file: production-config.json
[2025-10-10 15:22:12][INFO] Selected Appliance Type: VIAHR
[2025-10-10 15:22:12][INFO] Invoking Veeam Hardened Repository workflow...
[2025-10-10 15:22:12][INFO] ==================================================================================================
[2025-10-10 15:22:12][INFO]                          VIA WORKFLOW - Veeam Hardened Repository
[2025-10-10 15:22:12][INFO] ==================================================================================================
[2025-10-10 15:22:12][INFO] Config only set to False
[2025-10-10 15:22:12][INFO] Testing prerequisites...
[2025-10-10 15:22:12][INFO] WSL is available
[2025-10-10 15:22:12][INFO] xorriso is available at: /usr/bin/xorriso
[2025-10-10 15:22:12][INFO] All prerequisites validated successfully
[2025-10-10 15:22:12][INFO] Working in directory: K:\autodeploy vsa\test
[2025-10-10 15:22:12][INFO] Out-of-place modification mode: creating VeeamJeOS_13.0.0.4967_20250822_customized.iso
[2025-10-10 15:22:13][INFO] Working copy created: VeeamJeOS_13.0.0.4967_20250822_customized.iso

==================================================================================================
                                    ISO MODIFICATION SUMMARY
==================================================================================================
Appliance Type: VIAHR
Source ISO: VeeamJeOS_13.0.0.4967_20250822.iso
Target ISO: VeeamJeOS_13.0.0.4967_20250822_customized.iso
Mode: Out-of-Place

CONFIGURATION:
  GRUB Timeout: 0 seconds
  Keyboard: fr
  Timezone: Europe/Paris
  Hostname: veeam-hardened
  Network: Static IP (192.168.1.211/255.255.255.0 via 192.168.1.1)
  DNS: 192.168.1.64, 8.8.8.4, 8.8.8.8

OPTIONAL FEATURES:
  Node Exporter Local: Disabled
  Node Exporter Online: Disabled
==================================================================================================

Press Enter to continue or Ctrl+C to abort...
[2025-10-10 15:22:14][INFO] Extracting configuration files from ISO...
[2025-10-10 15:22:14][INFO] Executing: Extract configuration files
[2025-10-10 15:22:14][INFO] Command: wsl xorriso -boot_image any keep -dev "VeeamJeOS_13.0.0.4967_20250822_customized.iso" -osirrox on -extract hardened-repo-ks.cfg hardened-repo-ks.cfg
[2025-10-10 15:22:15][INFO] Extract configuration files completed successfully
[2025-10-10 15:22:15][INFO] Executing: Extract configuration files
[2025-10-10 15:22:15][INFO] Command: wsl xorriso -boot_image any keep -dev "VeeamJeOS_13.0.0.4967_20250822_customized.iso" -osirrox on -extract /EFI/BOOT/grub.cfg grub.cfg
[2025-10-10 15:22:15][INFO] Extract configuration files completed successfully
[2025-10-10 15:22:15][INFO] File extracted: hardened-repo-ks.cfg
[2025-10-10 15:22:15][INFO] File extracted: grub.cfg
[2025-10-10 15:22:15][INFO] Configuring GRUB bootloader...
[2025-10-10 15:22:15][INFO] Updated with ${1} inst.assumeyes in grub.cfg
[2025-10-10 15:22:15][INFO] Updated with set default="Veeam Hardened Repository>Install - fresh install, wipes everything (including local backups)" in grub.cfg
[2025-10-10 15:22:15][INFO] Updated with set timeout=0 in grub.cfg
[2025-10-10 15:22:15][INFO] Configuring Kickstart file...
[2025-10-10 15:22:15][INFO] Setting keyboard layout to fr
[2025-10-10 15:22:15][INFO] Updated with keyboard --xlayouts='fr' in hardened-repo-ks.cfg
[2025-10-10 15:22:15][INFO] Setting timezone to Europe/Paris
[2025-10-10 15:22:15][INFO] Updated with timezone Europe/Paris --utc in hardened-repo-ks.cfg
[2025-10-10 15:22:15][INFO] Configuring network settings
[2025-10-10 15:22:15][INFO] Using static IP configuration: 192.168.1.211
[2025-10-10 15:22:15][INFO] Network configuration applied
[2025-10-10 15:22:15][INFO] Added content after line: mkdir -p /var/log/veeam/
[2025-10-10 15:22:15][INFO] Added content after line: find /etc/yum.repos.d/ -type f -not -name "*veeam*" -delete
[2025-10-10 15:22:15][INFO] Normalizing line endings...
[2025-10-10 15:22:15][INFO] Committing changes to ISO...
[2025-10-10 15:22:15][INFO] Executing: Commit changes to ISO
[2025-10-10 15:22:15][INFO] Command: wsl xorriso -boot_image any keep -dev "VeeamJeOS_13.0.0.4967_20250822_customized.iso" -rm hardened-repo-ks.cfg
[2025-10-10 15:22:17][INFO] Commit changes to ISO completed successfully
[2025-10-10 15:22:17][INFO] Executing: Commit changes to ISO
[2025-10-10 15:22:17][INFO] Command: wsl xorriso -boot_image any keep -dev "VeeamJeOS_13.0.0.4967_20250822_customized.iso" -map hardened-repo-ks.cfg hardened-repo-ks.cfg
[2025-10-10 15:22:17][INFO] Commit changes to ISO completed successfully
[2025-10-10 15:22:17][INFO] Executing: Commit changes to ISO
[2025-10-10 15:22:17][INFO] Command: wsl xorriso -boot_image any keep -dev "VeeamJeOS_13.0.0.4967_20250822_customized.iso" -rm /EFI/BOOT/grub.cfg
[2025-10-10 15:22:17][INFO] Commit changes to ISO completed successfully
[2025-10-10 15:22:17][INFO] Executing: Commit changes to ISO
[2025-10-10 15:22:17][INFO] Command: wsl xorriso -boot_image any keep -dev "VeeamJeOS_13.0.0.4967_20250822_customized.iso" -map grub.cfg /EFI/BOOT/grub.cfg
[2025-10-10 15:22:19][INFO] Commit changes to ISO completed successfully
[2025-10-10 15:22:19][INFO] ISO customization completed successfully!

==================================================================================================
                                        SUCCESS!
==================================================================================================
Customized ISO: VeeamJeOS_13.0.0.4967_20250822_customized.iso
Appliance Type: VIAHR
Mode: Out-of-Place
==================================================================================================
[2025-10-10 15:22:19][INFO] Script execution completed successfully
**********************
Windows PowerShell transcript end
End time: 20251010152219
**********************
